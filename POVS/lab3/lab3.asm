#include "p16f84.inc"
 
vcycle set 0xFF
vpause equ 0x0c

number_times set 0x3
counter equ 0x0d


GOTO begin

WAIT_1S:
	MOVLW vcycle
	MOVWF vpause
	L0:
	DECFSZ vpause
	GOTO L0
	MOVLW vcycle
	MOVWF vpause
	L1:
	DECFSZ vpause
	GOTO L1
	RETURN

INIT_PORTB:
	BCF STATUS,RP0
	CLRF PORTB
	BSF STATUS,RP0
	MOVLW 0x0
	MOVWF TRISB
	BCF STATUS,RP0
	RETURN

FIRST:
	BCF STATUS,RP0
	MOVLW number_times
	MOVWF counter
	FIRST_LOOP:
	BSF PORTB, 0
	BSF PORTB, 1
	BSF PORTB, 2
	BSF PORTB, 7
	CALL WAIT_1S
	BCF PORTB, 1
	BCF PORTB, 2
	BCF PORTB, 7
	BCF PORTB, 0
	CALL WAIT_1S
	DECFSZ counter
	GOTO FIRST_LOOP
	RETURN

SECOND:
	BCF STATUS,RP0
	BCF STATUS,RP0
	MOVLW number_times
	MOVWF counter
	SECOND_LOOP:

	BSF PORTB, 0x0
	CALL WAIT_1S
	BCF PORTB, 0x0

	BSF PORTB, 0x1
	CALL WAIT_1S
	BCF PORTB, 0x1

	BSF PORTB, 0x2
	CALL WAIT_1S
	BCF PORTB, 0x2

	BSF PORTB, 0x7
	CALL WAIT_1S
	BCF PORTB, 0x7
	DECFSZ counter
	GOTO SECOND_LOOP
	RETURN

THIRD:
	RETURN

begin:
	CALL INIT_PORTB
	CALL FIRST
	CALL INIT_PORTB
	CALL SECOND


	END